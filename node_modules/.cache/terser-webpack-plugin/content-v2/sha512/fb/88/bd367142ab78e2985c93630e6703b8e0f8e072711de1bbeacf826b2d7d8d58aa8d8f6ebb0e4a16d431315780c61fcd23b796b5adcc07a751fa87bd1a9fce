{"code":"!function(e){var t={};function s(i){if(t[i])return t[i].exports;var a=t[i]={i:i,l:!1,exports:{}};return e[i].call(a.exports,a,a.exports,s),a.l=!0,a.exports}s.m=e,s.c=t,s.d=function(e,t,i){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},s.r=function(e){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&\"object\"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(s.r(i),Object.defineProperty(i,\"default\",{enumerable:!0,value:e}),2&t&&\"string\"!=typeof e)for(var a in e)s.d(i,a,function(t){return e[t]}.bind(null,a));return i},s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,\"a\",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p=\"\",s(s.s=26)}([function(e,t,s){e.exports=s.p+\"82991267271463c0b0d0c508e5d082b2.png\"},function(e,t,s){e.exports=s.p+\"1e80fe70f7fb4e19b572fd327230224d.png\"},function(e,t,s){e.exports=s.p+\"c8b189d3e051fe3ab2e1fc62c49de4eb.png\"},function(e,t,s){e.exports=s.p+\"d250554beb9a975306add12cc21d84bf.png\"},function(e,t,s){e.exports=s.p+\"658bf491ca5b51979b32f4e430015139.png\"},function(e,t,s){e.exports=s.p+\"390d130675a89d145efd49dbb5375a6b.png\"},function(e,t,s){e.exports=s.p+\"6ece39af467109cb6fbe322d3fdd9216.png\"},function(e,t,s){e.exports=s.p+\"1a5bd8bed2d7ddc8a8f4f1389a06759a.png\"},function(e,t,s){e.exports=s.p+\"62b86a0a8d00f100034a2c17cc5b84f3.png\"},function(e,t,s){e.exports=s.p+\"97eb75dc544b864964a8a75d0e135fab.png\"},function(e,t,s){e.exports=s.p+\"653fd4e1b45bcb6f9ee31c6ab3df8273.png\"},function(e,t,s){e.exports=s.p+\"d478305e59404c6309392a24e70a149f.png\"},function(e,t,s){e.exports=s.p+\"5d2ec4bfba6648a5941277992278ef01.png\"},function(e,t,s){e.exports=s.p+\"931bca418a2486fb00e1574f52639d32.png\"},function(e,t,s){e.exports=s.p+\"82f409b95f9c0c935ffd560ce94a27cf.png\"},function(e,t,s){e.exports=s.p+\"36bff7e319843dbe3eeafa465d412788.png\"},function(e,t,s){e.exports=s.p+\"d8b59c99d6e8a03b3c301fc1221f568f.png\"},function(e,t,s){e.exports=s.p+\"ef4bef422968efac0ca48ce3ce31ba28.png\"},function(e,t,s){e.exports=s.p+\"638c587f830bb34a116a8010bfe7fde3.png\"},function(e,t,s){e.exports=s.p+\"a4ea24c8714a9bb362bd2f08644c5888.png\"},function(e,t,s){e.exports=s.p+\"d96ff5659df73e2b839f0e63ac09457f.png\"},function(e,t,s){e.exports=s.p+\"a46af6b1b68a435f031a1c675389ec32.png\"},function(e,t,s){e.exports=s.p+\"8ae5662dc26f6e9808e9b507daca5b0c.png\"},function(e,t,s){e.exports=s.p+\"c85d3cad591da5f96620fb27c6b670c9.png\"},function(e,t,s){e.exports=s.p+\"d9842b819fac1c7b3101d8a0ec0f89c3.png\"},function(e,t,s){e.exports=s.p+\"5da2f9992706e3b60d7b0fc4d2df5af9.png\"},function(e,t,s){\"use strict\";s.r(t);class i{static scaleToGameW(e,t,s){e.displayWidth=s.game.config.width*t,e.scaleY=e.scaleX}static scaleToGameH(e,t,s){e.displayHeight=s.game.config.height*t,e.scaleX=e.scaleY}static centerH(e,t){e.x=t.game.config.width/2-e.displayWidth/2}static centerV(e,t){e.y=t.game.config.height/2-e.displayHeight/2}static center2(e,t){e.x=t.game.config.width/2-e.displayWidth/2,e.y=t.game.config.height/2-e.displayHeight/2}static center(e,t){e.x=t.game.config.width/2,e.y=t.game.config.height/2}static centerX(e){return e.game.config.width/2}static getYPer(e,t){return e.game.config.height*t}static getXPer(e,t){return e.game.config.width*t}static scaleImageToSize(e,t,s){var i=t/e.width,a=s/e.height,h=i;h>a&&(h=a),e.setScale(h)}static scaleImageToWidth(e,t){var s=t/e.width;e.setScale(s)}static alignToTopLeft(e){e.x=e.displayWidth/2,e.y=e.displayHeight/2}static alignToTopRight(e,t){e.x=t.sys.game.config.width-e.displayWidth/2,e.y=e.displayHeight/2}static alignToLBottomLeft(e,t){e.x=e.displayWidth/2,e.y=t.sys.game.config.height-e.displayHeight/2}static alignToLBottomRight(e,t){e.x=t.game.config.width-e.displayWidth/2,e.y=t.game.config.height-e.displayHeight/2}}let a=null;class h extends Phaser.Events.EventEmitter{constructor(){return a||(super(),a=this),a}static getInstance(){return a||(a=new h),a}}class o extends Phaser.GameObjects.Text{constructor(e){super(e.scene,0,0,e.text),this.config=e,this.setOrigin(.5,.5),e.x&&(this.x=e.x),e.y&&(this.y=e.y),e.scale&&Align.scaleToGameW(this,e.scale),e.textStyle||(e.textStyle={fontSize:\"16px\",color:\"#ff0000\"}),e.textStyle&&(e.textStyle.style&&this.setStyle(e.textStyle.style),e.textStyle.stroke&&(e.textStyle.strokeThick?this.setStroke(e.textStyle.stroke,e.textStyle.strokeThick):this.setStroke(e.textStyle.stroke,4)),e.textStyle.shadow&&this.setShadow(4,4,e.shadow,2,!1,!0)),e.event&&(this.setInteractive(),this.on(\"pointerdown\",this.onDown,this)),this.scene.add.existing(this)}onDown(){h.getInstance().emit(this.config.event,this.config)}sceneChanged(){this.destroy()}}class l{constructor(e){this.config=e,e.scene?(e.rows||(e.rows=5),e.cols||(e.cols=5),this.scene=e.scene,e.height||(e.height=this.scene.sys.game.config.height),e.width||(e.width=this.scene.sys.game.config.width),this.cw=e.width/e.cols,this.ch=e.height/e.rows,this.startX=0,this.startY=0,e.startX&&(this.startX=e.startX),e.startY&&(this.startY=e.startY)):console.log(\"missing scene\")}show(){this.graphics=this.scene.add.graphics(),this.graphics.lineStyle(2,16711680);for(var e=0;e<this.config.width;e+=this.cw)this.graphics.moveTo(this.startX+e,this.startY),this.graphics.lineTo(this.startX+e,this.startY+this.config.height);for(e=0;e<this.config.height;e+=this.ch)this.graphics.moveTo(this.startX,this.startY+e),this.graphics.lineTo(this.startX+this.config.width,this.startY+e);return this.graphics.strokePath(),this.graphics}placeAt(e,t,s){var i=this.startX+this.cw*e+this.cw/2,a=this.startY+this.ch*t+this.ch/2;return s.x=i,s.y=a,{x:i,y:a,sx:this.startX,sy:this.startY}}placeAtIndex(e,t){var s=Math.floor(e/this.config.cols),i=e-s*this.config.cols;return this.placeAt(i,s,t)}showNumbers(){this.show();for(var e=0,t=0;t<this.config.rows;t++)for(var s=0;s<this.config.cols;s++){var i=this.scene.add.text(0,0,e,{color:\"#ff0000\"});i.setOrigin(.5,.5),this.placeAtIndex(e,i),e++}}showPos(){this.show();for(var e=0;e<this.config.rows;e++)for(var t=0;t<this.config.cols;t++){let i=\"x:\"+t+\"\\ny:\"+e;var s=this.scene.add.text(0,0,i,{color:\"#ff0000\",fontSize:16,fontStyle:\"bold\",backgroundColor:\"#000000\"});s.setOrigin(.5,.5),this.placeAt(t,e,s)}}findNearestIndex(e,t){var s=Math.floor(t/this.ch),i=Math.floor(e/this.cw);return s*this.config.cols+i}getPosByIndex(e){var t=Math.floor(e/this.config.cols),s=e-t*this.config.cols;return{x:this.cw*s+this.cw/2,y:this.ch*t+this.ch/2}}}let n=null;class r{constructor(){null==n&&(n=this),this._score=0,this.soundOn=!0,this.musicOn=!0,this.emitter=h.getInstance()}static getInstance(){return null==n&&(n=new r),n}toggleMusic(){this.musicOn=!this.musicOn,this.emitter.emit(\"MUSIC_STAT_CHANGED\")}toggleSound(){this.soundOn=!this.soundOn}set score(e){this._score=e,this.emitter.emit(\"SCORE_UPDATED\")}get score(){return this._score}getStars(){return 3}}class c{constructor(e){this.scene=e.scene;let t=this.scene.sys.game;var s=this.scene.add.image(t.config.width/2,t.config.height/2,e.key);s.displayWidth=t.config.width,s.displayHeight=t.config.height}}let d,p,m=null;class g{constructor(e){null==m&&(m=this),this.setConstants(e)}static getInstance(e){return null==m&&(m=new g(e)),window.textStyles=m,m}setConstants(e){this.width=e,g.SIZE_VERY_LARGE=e/5,g.SIZE_LARGE=e/10,g.SIZE_MED3=e/15,g.SIZE_MED=e/20,g.SIZE_MED2=e/25,g.SIZE_SMALL=e/30,g.SIZE_SMALL2=e/40,g.MAIN_FONT=\"Impact\",this.styles=[],this.styles[g.DEFAULT]={style:{color:\"#ffffff\",fontSize:g.SIZE_MED}},this.setDefaults()}getSize(e){return this.width/e}getStyle(e){return this.styles.hasOwnProperty(e)||(e=g.DEFAULT),this.styles[e]}addStyle(e,t){this.styles[e]=t}regSimple(e,t,s=g.SIZE_MED,i=g.MAIN_FONT){let a={style:{color:t,fontSize:s,fontFamily:i}};this.styles[e]=a}regAdvanced(e,t,s=g.SIZE_MED,i=g.MAIN_FONT,a=\"#ff0000\",h=4,o=\"#000000\"){this.styles[e]={stroke:a,strokeThick:h,style:{color:t,fontSize:s,fontFamily:i}}}setDefaults(){this.styles.DEFAULT={style:{color:\"#ffffff\",fontSize:g.SIZE_MED,font:g.MAIN_FONT}},this.styles.PURPLE={stroke:\"#1D1F9C\",strokeThick:4,style:{color:\"#1D1F9C\",fontSize:g.SIZE_MED,fontFamily:g.MAIN_FONT}},this.styles.TOAST_BAR={shadow:\"#000000\",stroke:\"#ff0000\",strokeThick:4,style:{color:\"#ffffff\",fontSize:g.SIZE_MED,fontFamily:g.MAIN_FONT}},this.styles.CLOCK={style:{color:\"#ffffff\",fontSize:g.SIZE_MED,fontFamily:g.MAIN_FONT}},this.styles.CLOCK2={style:{color:\"#000000\",fontSize:g.SIZE_MED2,fontFamily:g.MAIN_FONT}},this.styles.TITLE_TEXT={style:{fontFamily:g.MAIN_FONT,fontSize:g.SIZE_MED3,color:\"red\"},shadow:\"#000000\",strokeThickness:2},this.styles.POINT_BOX={style:{fontFamily:g.MAIN_FONT,fontSize:g.SIZE_LARGE,color:\"red\"},shadow:\"#000000\",stroke:\"#ff0000\",strokeThickness:4},this.styles.SCORE={style:{fontFamily:g.MAIN_FONT,fontSize:g.SIZE_MED,color:\"#ffffff\"}},this.styles.BLACK={style:{fontFamily:g.MAIN_FONT,fontSize:g.SIZE_SMALL2,color:\"#000000\"}},this.styles.RED={style:{fontFamily:g.MAIN_FONT,fontSize:g.SIZE_SMALL2,color:\"#FF0000\"}},this.styles.BLACK2={style:{fontFamily:g.MAIN_FONT,fontSize:g.SIZE_SMALL,color:\"#000000\"}},this.styles.POINTS={style:{fontFamily:g.MAIN_FONT,fontSize:g.SIZE_VERY_LARGE,color:\"#ff0000\"}},this.styles.WHITE={style:{fontFamily:g.MAIN_FONT,fontSize:g.SIZE_MED,color:\"#ffffff\"}},this.styles.BUTTON_STYLE={style:{fontFamily:g.MAIN_FONT,fontSize:g.SIZE_MED2,color:\"#ffffff\"},shadow:\"#000000\"}}}class u{constructor(){}static getInstance(e){return null==d&&((d=new u).scene=e.scene,d.model=r.getInstance(),d.emitter=h.getInstance(),d.emitter.on(\"PLAY_SOUND\",d.playSound.bind(d)),d.emitter.on(\"MUSIC_CHANGED\",d.musicChanged,d)),d}musicChanged(){this.background&&(0==this.model.musicOn?this.background.stop():this.background.play())}playSound(e){1==this.model.soundOn&&this.scene.sound.add(e).play()}setBackgroundMusic(e){1==this.model.musicOn&&(this.background=this.scene.sound.add(e,{volume:.5,loop:!0}),this.background.play())}}class y{constructor(){this.model=r.getInstance(),this.mm=u.getInstance(),this.emitter=h.getInstance(),this.emitter.on(\"TOGGLE_MUSIC\",this.toggleMusic.bind(this)),this.emitter.on(\"TOGGLE_SOUND\",this.toggleSound.bind(this)),this.emitter.on(\"SET_SCORE\",this.setScore.bind(this)),this.emitter.on(\"UP_POINTS\",this.upPoints.bind(this))}static getInstance(){return null==p&&(p=new y),p}toggleMusic(){this.model.toggleMusic(),this.mm.musicChanged()}toggleSound(){this.model.toggleSound()}setScore(e){this.model.score=e}upPoints(e){var t=this.model.score;t+=e,this.model.score=t}}class f extends Phaser.GameObjects.Container{constructor(e){if(!e.scene)return void console.log(\"missing scene!\");super(e.scene),this.scene=e.scene,this.emitter=h.getInstance();let t=.1;e.scale&&(t=e.scale),this.back=this.scene.add.image(0,0,e.backKey),this.onIcon=this.scene.add.image(0,0,e.onIcon),this.offIcon=this.scene.add.image(0,0,e.offIcon),i.scaleToGameW(this.back,t,this.scene),i.scaleToGameW(this.onIcon,t/2,this.scene),i.scaleToGameW(this.offIcon,t/2,this.scene),this.add(this.back),this.add(this.onIcon),this.add(this.offIcon),0!=e.value&&(e.value=!0),this.value=e.value,e.event&&(this.event=e.event),e.callback&&(this.callback=callback),this.setIcons(),this.back.setInteractive(),this.back.on(\"pointerdown\",this.toggle,this),this.back.setScrollFactor(0),e.x&&(this.x=e.x),e.y&&(this.y=e.y),this.setSize(this.back.displayWidth,this.back.displayHeight),this.scene.add.existing(this)}toggle(){this.value=!this.value,this.setIcons(),this.event&&this.emitter.emit(this.event,this.value),this.callback&&this.callback(this.value)}setIcons(){1==this.value?(this.onIcon.visible=!0,this.offIcon.visible=!1):(this.onIcon.visible=!1,this.offIcon.visible=!0)}}class b{constructor(){this._x=0,this._y=0,this._oldX=0,this._oldY=0,this._visible=!0,this._displayWidth=0,this._displayHeight=0,this.children=[],this.childIndex=-1,this.isPosBlock=!0,this._depth=1,this._alpha=1}set depth(e){this._depth=e,this.children.length>0&&this.setChildDepth(this.children[0])}get depth(){return this._depth}setChildDepth(e){var t=100*this._depth+e.childIndex;null==e.scene&&(e.scene=gw.model.currentScene),e.depth=t,null!=e.nextChild&&this.setChildDepth(e.nextChild)}set x(e){this._oldX=this._x,this._x=e,this.updatePositions()}set y(e){this._oldY=this._y,this._y=e,this.updatePositions()}get x(){return this._x}get y(){return this._y}add(e){this.childIndex++,e.childIndex=this.childIndex,this.children.push(e),this.buildList()}removeChild(e){this.children.splice(e.childIndex,1),this.buildList();for(var t=this.children.length,s=0;s<t;s++)this.children[s].childIndex=s;this.childIndex=t}buildList(){var e=this.children.length;if(e>1)for(var t=1;t<e;t++)this.children[t-1].nextChild=this.children[t];this.children[e-1].nextChild=null}willRender(){}get displayWidth(){return this._displayWidth}get displayHeight(){return this._displayHeight}setSize(e,t){this._displayWidth=e,this._displayHeight=t}setXY(e,t){this.x=e,this.y=t,this.updatePositions()}set visible(e){this._visible!=e&&(this._visible=e,this.children.length>0&&this.updateChildVisible(this.children[0],e))}get visible(){return this._visible}set alpha(e){this._alpha!=e&&(this._alpha=e,this.children.length>0&&this.updateChildAlpha(this.children[0],e))}get alpha(){return this._alpha}setScrollFactor(e){this.children.length>0&&this.updateChildScroll(this.children[0],e)}updateChildScroll(e,t){e.setScrollFactor(t),e.nextChild&&e.nextChild.setScrollFactor(t)}updateChildAlpha(e,t){e.alpha=t,1==e.isPosBlock&&(e.alpha=t),null!=e.nextChild&&this.updateChildAlpha(e.nextChild,t)}updateChildVisible(e,t){e.visible=t,1==e.isPosBlock&&(e.visible=t),null!=e.nextChild&&this.updateChildVisible(e.nextChild,t)}updateChildPos(e){e.y=e.y-this._oldY+this._y,e.x=e.x-this._oldX+this._x,1==e.isPosBlock&&e.updatePositions(),null!=e.nextChild&&this.updateChildPos(e.nextChild),this._oldX=this._x,this._oldY=this._y}updatePositions(){this.children&&this.children.length>0&&this.updateChildPos(this.children[0])}getRelPos(e){return{x:e.x-this.x,y:e.y-this.y}}once(e,t,s){}getChildren(e,t){e.push(t),t.isPosBlock&&t.children.length>0&&t.getChildren(e,t.children[0]),t.nextChild&&this.getChildren(e,t.nextChild)}getAllChildren(){var e=[];return this.children.length>0&&this.getChildren(e,this.children[0]),e}getChildAt(e){return this.children[e]}setMask(e){this.getAllChildren().forEach(function(t){t.setMask(e)}.bind(this))}destroy(){var e=this.getAllChildren();this.childIndex=-1;for(var t=e.length,s=0;s<t;s++)e[s].destroy();this.children.length=0,e.length=0}}class x extends b{constructor(e){super(e.scene),this.scene=e.scene;let t=r.getInstance(),s=new f({scene:this.scene,backKey:\"toggle1\",onIcon:\"musicOn\",offIcon:\"musicOff\",event:\"TOGGLE_MUSIC\",scale:.2,value:t.musicOn,x:0,y:0});this.add(s);let i=new f({scene:this.scene,backKey:\"toggle1\",onIcon:\"sfxOn\",offIcon:\"sfxOff\",event:\"TOGGLE_SOUND\",value:t.soundOn,scale:.2,x:0,y:0});this.add(i),s.x=-120,i.x=120,s.setScrollFactor(0),i.setScrollFactor(0)}}class k extends Phaser.Scene{constructor(e){super(e)}preload(){}create(){this.mm=u.getInstance({scene:this}),this.controller=y.getInstance(),this.model=r.getInstance(),this.emitter=h.getInstance(),this.textStyles=g.getInstance(this.sys.game.config.width),this.gw=this.sys.game.config.width,this.gh=this.sys.game.config.height}setBackground(e){return new c({scene:this,key:e})}placeImage(e,t,s){const a=this.add.sprite(0,0,e);return this.aGrid.placeAtIndex(t,a),-1!==s&&i.scaleToGameW(a,s,this),a}placeText(e,t,s){const i=this.textStyles.getStyle(s),a=new o({scene:this,text:e,textStyle:i});return this.aGrid.placeAtIndex(t,a),a}placeAtIndex(e,t){this.aGrid.placeAtIndex(e,t,this)}placeAt(e,t,s){this.aGrid.placeAt(e,t,s,this)}makeAlignGrid(e=11,t=11){this.aGrid=new l({scene:this,rows:e,cols:t})}makeGear(){const e=this.add.image(0,0,\"gear\");i.scaleToGameW(e,.1,this),this.aGrid.placeAtIndex(110,e),e.setInteractive(),e.on(\"pointerdown\",this.toggleSoundPanel.bind(this)),e.setScrollFactor(0)}makeSoundPanel(){this.soundPanel=new x({scene:this}),i.center(this.soundPanel,this),this.soundPanel.visible=!1,this.soundPanel.depth=2e3,this.soundPanel.setScrollFactor(0)}toggleSoundPanel(){if(this.soundPanel.visible=!this.soundPanel.visible,document.getElementById(\"enterName\")){const e=document.getElementsByTagName(\"div\");this.soundPanel.visible?e[0].style.display=\"none\":e[0].style.display=\"block\"}}getStyle(e){return this.textStyles.getStyle(e)}update(){}}var v=s(8),S=s.n(v),I=s(9),T=s.n(I),W=s(10),w=s.n(W),G=s(11),A=s.n(G),E=s(12),D=s.n(E),_=s(13),C=s.n(_),P=s(14),H=s.n(P),O=s(15),F=s.n(O),B=s(2),L=s.n(B),N=s(0),M=s.n(N),R=s(16),j=s.n(R),U=s(17),K=s.n(U),Y=s(18),X=s.n(Y),Z=s(3),z=s.n(Z),J=s(19),V=s.n(J),q=s(4),Q=s.n(q),$=s(5),ee=s.n($),te=s(20),se=s.n(te),ie=s(6),ae=s.n(ie),he=s(21),oe=s.n(he),le=s(22),ne=s.n(le),re=s(1),ce=s.n(re),de=s(7),pe=s.n(de);class me extends Phaser.Physics.Arcade.Sprite{constructor(e,t,s,i){super(e,t,s,i),this.scene=e,this.scene.add.existing(this),this.scene.physics.world.enableBody(this,0)}}class ge extends me{constructor(e,t,s,i){super(e,t,s,i),this.setData(\"speed\",320),this.setGravityY(50)}inkLeft(){this.body.velocity.x=-this.getData(\"speed\")}inkRight(){this.body.velocity.x=this.getData(\"speed\")}inkAnimation(){this.anims.play(\"ink\"),this.scene.mm.playSound(\"smb_bump\")}animation(){this.scene.anims.create({key:\"ink\",frames:this.scene.anims.generateFrameNumbers(\"ink\",{start:0,end:2}),frameRate:10,repeat:-1})}}class ue extends me{constructor(e,t,s,i){super(e,t,s,i),this.setData(\"speed\",320),this.setGravityY(0)}boltLeft(){this.body.velocity.x=-this.getData(\"speed\")}boltRight(){this.body.velocity.x=this.getData(\"speed\")}}class ye extends me{constructor(e,t,s,i){super(e,t,s,i),this.setData(\"speed\",300),this.setGravityY(0)}bubbleLeft(){this.body.velocity.x=-this.getData(\"speed\")}bubbleRight(){this.body.velocity.x=this.getData(\"speed\")}}class fe extends me{constructor(e,t,s,i){super(e,t,s,i),this.scene=e,this.setData(\"speed\",200),this.setData(\"speedJump\",250),this.setData(\"dbJump\",!0),this.setData(\"jumping\",!1),this.setData(\"jumpTime\",0),this.setData(\"inkTime\",0),this.setGravityY(250)}moveLeft(){this.body.velocity.x=-this.getData(\"speed\"),this.anims.play(\"left\",!0)}moveRight(){this.body.velocity.x=this.getData(\"speed\"),this.anims.play(\"right\",!0)}jump(e,t){this.getData(\"jumpTime\")!==e.timeDown&&this.setData(\"jumping\",!1),!this.body.touching.down&&this.getData(\"jumpTime\")+50<e.timeDown&&this.setData(\"dbJump\",!1),this.setData(\"jumpTime\",e.timeDown),this.getData(\"jumping\")||(this.body.velocity.y=-this.getData(\"speedJump\"),t.mm.playSound(\"smw_jump\")),this.setData(\"jumping\",!0)}animation(){this.scene.anims.create({key:\"left\",frames:this.scene.anims.generateFrameNumbers(\"hero\",{start:0,end:1}),frameRate:10,repeat:-1}),this.scene.anims.create({key:\"turn\",frames:[{key:\"hero\",frame:4}],frameRate:20}),this.scene.anims.create({key:\"right\",frames:this.scene.anims.generateFrameNumbers(\"hero\",{start:2,end:3}),frameRate:10,repeat:-1})}}class be extends me{constructor(e,t,s,i){super(e,t,s,i),this.scene=e,this.setData(\"speed\",120)}moveLeft(){this.body.velocity.x=-this.getData(\"speed\"),this.anims.play(\"dolleft\",!0)}moveRight(){this.body.velocity.x=this.getData(\"speed\"),this.anims.play(\"dolright\",!0)}animation(){this.scene.anims.create({key:\"dolright\",frames:this.scene.anims.generateFrameNumbers(\"dolphin\",{start:0,end:3}),frameRate:10,repeat:-1}),this.scene.anims.create({key:\"dolleft\",frames:this.scene.anims.generateFrameNumbers(\"dolphin\",{start:4,end:7}),frameRate:10,repeat:-1})}}class xe extends me{constructor(e,t,s,i){super(e,t,s,i),this.scene=e,this.setData(\"speed\",80),this.setData(\"life\",3)}moveLeft(){this.body.velocity.x=-this.getData(\"speed\"),this.anims.play(\"whaleleft\",!0)}moveRight(){this.body.velocity.x=this.getData(\"speed\"),this.anims.play(\"whaleright\",!0)}gotHit(){let e=this.getData(\"life\");return e-=1,this.setData(\"life\",e),0===e}animation(){this.scene.anims.create({key:\"whaleright\",frames:this.scene.anims.generateFrameNumbers(\"whale\",{start:0,end:9}),frameRate:10,repeat:-1}),this.scene.anims.create({key:\"whaleleft\",frames:this.scene.anims.generateFrameNumbers(\"whale\",{start:10,end:19}),frameRate:10,repeat:-1})}}class ke extends me{constructor(e,t,s,i){super(e,t,s,i),this.scene=e,this.setData(\"speed\",200)}moveUp(){this.body.velocity.y=-this.getData(\"speed\"),this.anims.play(\"jellymove\",!0)}moveDown(){this.body.velocity.y=this.getData(\"speed\")}animation(){this.scene.anims.create({key:\"jellymove\",frames:this.scene.anims.generateFrameNumbers(\"jelly\",{start:0,end:3}),frameRate:10,repeat:-1})}}class ve extends me{constructor(e,t,s,i){super(e,t,s,i),this.scene=e,this.setData(\"speed\",180),this.setData(\"life\",2),this.setData(\"shoot\",!0)}shootAgain(){this.setData(\"shoot\",!0)}shootDone(){this.setData(\"shoot\",!1)}moveLeft(){this.body.velocity.x=-this.getData(\"speed\"),this.anims.play(\"agroleft\",!0)}moveRight(){this.body.velocity.x=this.getData(\"speed\"),this.anims.play(\"agroright\",!0)}gotHit(){let e=this.getData(\"life\");return e-=1,this.setData(\"life\",e),0===e}animation(){this.scene.anims.create({key:\"agroright\",frames:this.scene.anims.generateFrameNumbers(\"agrofish\",{start:0,end:3}),frameRate:10,repeat:-1}),this.scene.anims.create({key:\"agroleft\",frames:this.scene.anims.generateFrameNumbers(\"agrofish\",{start:4,end:7}),frameRate:10,repeat:-1}),this.scene.anims.create({key:\"shootleft\",frames:[{key:\"agrofish\",frame:8}],frameRate:20,repeat:-1}),this.scene.anims.create({key:\"shootright\",frames:[{key:\"agrofish\",frame:9}],frameRate:20,repeat:-1})}}class Se extends me{constructor(e,t,s,i){super(e,t,s,i),this.scene=e,this.setData(\"speed\",130),this.setData(\"shoot\",!0)}shootAgain(){this.setData(\"shoot\",!0)}shootDone(){this.setData(\"shoot\",!1)}moveLeft(){this.body.velocity.x=-this.getData(\"speed\"),this.anims.play(\"seaHorseleft\",!0)}moveRight(){this.body.velocity.x=this.getData(\"speed\"),this.anims.play(\"seaHorseright\",!0)}animation(){this.scene.anims.create({key:\"seaHorseright\",frames:this.scene.anims.generateFrameNumbers(\"seaHorse\",{start:0,end:1}),frameRate:10,repeat:-1}),this.scene.anims.create({key:\"seaHorseleft\",frames:this.scene.anims.generateFrameNumbers(\"seaHorse\",{start:2,end:3}),frameRate:10,repeat:-1})}}class Ie extends b{constructor(e){super(e.scene),this.scene=e.scene,e.secs?this.secs--:this.secs=60,e.callback&&(this.callback=e.callback),this.useOnlySeconds=!1,e.useOnlySeconds&&(this.useOnlySeconds=e.useOnlySeconds),this.emitter=h.getInstance(),this.resetSecs=this.secs,this.text1=new o({scene:this.scene,text:e.text,textStyle:e.textStyle}),this.add(this.text1),this.setText(),this.setSize(this.text1.displayWidth,this.text1.displayHeight),this.scene.add.existing(this),this.emitter.on(\"SET_TIME\",this.setClock.bind(this)),this.emitter.on(\"ADD_TIME\",this.addTime.bind(this)),this.emitter.on(\"STOP_TIME\",this.stopClock.bind(this)),this.emitter.on(\"START_TIME\",this.startClock.bind(this)),this.emitter.on(\"RESET_TIME\",this.resetClock.bind(this))}getClockTime(){return this.secs}startClock(){this.timer=this.scene.time.addEvent({delay:1e3,callback:this.tick,callbackScope:this,loop:!0})}stopClock(){this.timer.remove()}setClock(e){this.secs=e,this.setText()}addTime(e){this.secs+=e}resetClock(){this.secs=this.resetSecs}tick(){this.secs--,0==this.secs&&(this.callback&&this.callback(),this.emitter.emit(\"TIMES_UP\")),this.setText()}setText2(){var e=Math.floor(this.secs/60),t=this.secs-60*e;t=this.leadingZeros(t),e=this.leadingZeros(e),this.text1.setText(t+\"s\")}setText(){if(1!=this.useOnlySeconds){var e=Math.floor(this.secs/60),t=this.secs-60*e;t=this.leadingZeros(t),e=this.leadingZeros(e),this.text1.setText(e+\":\"+t)}else this.setText2()}leadingZeros(e){return e<10?\"0\"+e:e}}class Te extends Phaser.GameObjects.Container{constructor(e){e.scene?(super(e.scene),this.scene=e.scene,e.color||(e.color=16711680),e.width||(e.width=200),e.height||(e.height=e.width/4),this.graphics=this.scene.add.graphics(),this.graphics.fillStyle(e.color,1),this.graphics.fillRect(0,0,e.width,e.height),this.add(this.graphics),this.graphics.x=-e.width/2,this.graphics.y=-e.height/2,e.x&&(this.x=e.x),e.y&&(this.y=e.y),this.scene.add.existing(this)):console.log(\"missing scene!\")}setPercent(e){this.graphics.scaleX=e}setTweenPer(e){this.timeTween=this.scene.tweens.add({targets:this.graphics,duration:980,scaleX:e})}}var We=s(23),we=s.n(We),Ge=s(24),Ae=s.n(Ge);class Ee extends Phaser.GameObjects.Container{constructor(e,t,s,a,h,o=!1){super(e),this.scene=e,this.button=this.scene.add.sprite(0,0,t).setInteractive(),this.text=this.scene.add.text(0,0,a,{fontSize:\"32px\",fill:\"#fff\"}),Phaser.Display.Align.In.Center(this.text,this.button),i.scaleToGameW(this.button,.32,e),this.add(this.button),this.add(this.text),this.button.on(\"pointerdown\",()=>{o&&this.scene.mm.background.stop(),this.scene.scene.start(h)}),this.button.on(\"pointerover\",()=>{this.button.setTexture(s),i.scaleToGameW(this.button,.37,this.scene)}),this.button.on(\"pointerout\",()=>{this.button.setTexture(t),i.scaleToGameW(this.button,.32,this.scene)}),this.scene.add.existing(this)}}class De{constructor(e){this.scene=e.scene,this.gameWidth=this.scene.game.config.width,this.gameHeight=this.scene.game.config.height,this.alignGrid=new l({scene:this.scene,rows:e.rows,cols:e.cols})}showNumbers(){this.alignGrid.showNumbers()}scaleToGameW(e,t){var s=document.getElementById(e),i=this.gameWidth*t;s.style.width=i+\"px\"}scaleToGameH(e,t){var s=document.getElementById(e),i=this.gameHeight*t;s.style.height=i+\"px\"}placeElementAt(e,t,s=!0,i=!1){var a=this.alignGrid.getPosByIndex(e),h=a.x,o=a.y,l=document.getElementById(t);l.style.position=\"absolute\";var n=l.style.width;n=this.toNum(n),1==s&&(h-=n/2);var r=l.style.height;r=this.toNum(r),1==i&&(o-=r/2),l.style.top=o+\"px\",l.style.left=h+\"px\"}toNum(e){return e=e.replace(\"px\",\"\"),e=parseInt(e)}addChangeCallback(e,t,s=null){var i=document.getElementById(e);i.onchange=null==s?t:t.bind(s)}hideElement(e){document.getElementById(e).style.display=\"none\"}showElement(e){document.getElementById(e).style.display=\"block\"}getTextAreaValue(e){return document.getElementById(e).value}getTextValue(e){return document.getElementById(e).innerText}setTextValue(e,t){var s=document.getElementById(e);window.el=s,s.value=t}copyFrom(e){document.getElementById(e).select(),document.execCommand(\"copy\")}addClickCallback(e,t,s=null){var i=document.getElementById(e);i.onclick=null==s?t:t.bind(s)}addOption(e,t,s){var i=document.getElementById(e),a=document.createElement(\"option\");a.text=t,a.data=s,i.add(a,0)}getSelectedItem(e){var t=document.getElementById(e);return t.options[t.selectedIndex].data}getSelectedIndex(e){return document.getElementById(e).selectedIndex}getSelectedText(e){var t=document.getElementById(e);return t.options[t.selectedIndex].text}}var _e={createElements:function(){const e=document.createElement(\"input\");return e.setAttribute(\"type\",\"text\"),e.setAttribute(\"id\",\"enterName\"),e.setAttribute(\"maxlength\",\"7\"),e.setAttribute(\"placeholder\",\"Enter your name...\"),e.setAttribute(\"style\",\"border: 1px solid;\"),e.required=!0,e}};var Ce=(()=>{const e=\"https://us-central1-js-capstone-backend.cloudfunctions.net/api/games/\".concat(\"71Ni8CRy4fTuVbB6tG23\",\"/scores\");return{getScores:()=>new Promise((t,s)=>{fetch(e).then(e=>e.json().then(e=>{t(e.result)})).catch(e=>{s(e)})}),setScores:(t,s)=>{const i={user:t,score:s};return fetch(e,{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify(i)}).then(e=>e.json())}}})();class Pe extends Phaser.GameObjects.Container{constructor(e,t,s,a){super(e),this.scene=e,this.score=a,this.button=this.scene.add.sprite(0,0,t).setInteractive(),this.text=this.scene.add.text(0,0,\"Send Score\",{fontSize:\"20px\",fill:\"#fff\"}),Phaser.Display.Align.In.Center(this.text,this.button),i.scaleToGameW(this.button,.2,e),this.add(this.button),this.add(this.text),this.button.on(\"pointerdown\",()=>{const e=document.getElementById(\"enterName\");\"\"!==e.value?Ce.setScores(e.value,this.score).then(e=>{this.scene.scene.start(\"SceneLeaderboard\")}).catch(()=>{this.scene.scene.start(\"SceneLeaderboard\")}):this.scene.placeText(\"* can't be blank\",63,\"RED\")}),this.button.on(\"pointerover\",()=>{this.button.setTexture(s),i.scaleToGameW(this.button,.23,e)}),this.button.on(\"pointerout\",()=>{this.button.setTexture(t),i.scaleToGameW(this.button,.2,e)}),this.scene.add.existing(this)}}var He=s(25),Oe=s.n(He);let Fe=navigator.userAgent.indexOf(\"Mobile\");-1===Fe&&(Fe=navigator.userAgent.indexOf(\"Tablet\"));let Be=800,Le=640;-1!==Fe&&(Be=window.innerWidth,Le=window.innerHeight);const Ne={type:Phaser.AUTO,width:Be,height:Le,parent:\"phaser-game\",scene:[class extends k{constructor(){super(\"SceneLoad\")}preload(){this.common=\"./assets/\",this.imagePath=\"\".concat(this.common,\"images/\"),this.audioPath=\"\".concat(this.common,\"audio/\"),this.load.image(\"btn1\",we.a),this.load.image(\"btnH1\",Ae.a),this.bar2=new Te({scene:this,height:.1*this.sys.game.config.height,width:.8*this.sys.game.config.width,color:16777215}),this.bar=new Te({scene:this,height:.1*this.sys.game.config.height,width:.8*this.sys.game.config.width}),i.center(this.bar,this),i.center(this.bar2,this),this.load.on(\"progress\",this.onProgress,this);const e=[\"gear\",\"musicOff\",\"musicOn\",\"sfxOn\",\"sfxOff\"];for(let t=0;t<e.length;t+=1)this.loadIcon(e[t]);const t=[\"panelBack\"];for(let e=0;e<t.length;e+=1)this.loadPng(t[e],this.imagePath);const s=[\"seaBg\"];for(let e=0;e<s.length;e+=1)this.loadJpg(s[e],this.imagePath);const a=[];for(let e=0;e<a.length;e+=1)this.loadWav(a[e],this.audioPath);const h=[\"underwater\"];for(let e=0;e<h.length;e+=1)this.loadMp3(h[e],this.audioPath);const o=[\"smw_jump\",\"smb_bump\",\"enemy_hit\",\"enemy_death\",\"game_over\",\"enemy_shoot\"];for(let e=0;e<o.length;e+=1)this.loadWav(o[e]);const l=[\"underwater\"];for(let e=0;e<l.length;e+=1)this.loadMp3(l[e]);this.loadToggle(1),this.loadToggle(2),this.loadButton(\"button\",1,2),this.load.image(\"holder\",\"\".concat(this.common,\"images/ui/backs/holder.jpg\"))}onProgress(e){this.bar.setPercent(e)}create(){this.scene.start(\"SceneTitle\")}loadButton(e,t,s){this.load.image(e,\"\".concat(this.imagePath,\"ui/buttons/\").concat(t,\"/\").concat(s,\".png\"))}loadIcon(e){this.load.image(e,\"\".concat(this.imagePath,\"ui/icons/\").concat(e,\".png\"))}loadToggle(e){this.load.image(\"toggle\".concat(e),\"\".concat(this.imagePath,\"ui/toggles/\").concat(e,\".png\"))}loadJpg(e,t=\"\"){\"\"===t&&(t=this.imagePath),this.load.image(e,\"\".concat(t+e,\".jpg\"))}loadPng(e,t=\"\"){\"\"===t&&(t=this.imagePath),this.load.image(e,\"\".concat(t+e,\".png\"))}loadWav(e,t=\"\"){\"\"===t&&(t=this.audioPath),this.load.audio(e,\"\".concat(t+e,\".wav\"))}loadMp3(e,t=\"\"){\"\"===t&&(t=this.audioPath),this.load.audio(e,\"\".concat(t+e,\".mp3\"))}update(){}},class extends k{constructor(){super(\"SceneTitle\")}preload(){super.preload()}create(){super.create(),this.mm.setBackgroundMusic(\"underwater\"),this.setBackground(\"seaBg\"),this.makeAlignGrid(11,11),this.placeText(\"Pacific Treasures\",27,\"TITLE_TEXT\"),this.startGame=new Ee(this,\"btn1\",\"btnH1\",\"Play Game\",\"SceneMain\"),this.aGrid.placeAtIndex(49,this.startGame),this.instructionBtn=new Ee(this,\"btn1\",\"btnH1\",\"Instructions\",\"SceneInstructions\"),this.aGrid.placeAtIndex(71,this.instructionBtn),this.leaderboardBtn=new Ee(this,\"btn1\",\"btnH1\",\"Leaderboard\",\"SceneLeaderboard\"),this.aGrid.placeAtIndex(93,this.leaderboardBtn),this.makeUi()}makeUi(){super.makeSoundPanel(),super.makeGear()}update(){}},class extends k{constructor(){super(\"SceneMain\")}preload(){this.load.image(\"coral1\",j.a),this.load.image(\"coral2\",K.a),this.load.image(\"bkgr1\",S.a),this.load.image(\"bkgr2\",T.a),this.load.image(\"bkgr3\",w.a),this.load.image(\"bkgr32\",A.a),this.load.image(\"ground1\",D.a),this.load.image(\"ground2\",C.a),this.load.image(\"ground3\",H.a),this.load.image(\"ground4\",F.a),this.load.image(\"chest\",M.a),this.load.image(\"enWall\",X.a),this.load.spritesheet(\"bubbleMove\",se.a,{frameWidth:24,frameHeight:8}),this.load.spritesheet(\"hero\",z.a,{frameWidth:43,frameHeight:48}),this.load.spritesheet(\"dolphin\",V.a,{frameWidth:64,frameHeight:30}),this.load.spritesheet(\"ink\",Q.a,{frameWidth:17,frameHeight:15}),this.load.spritesheet(\"light\",ae.a,{frameWidth:15,frameHeight:15}),this.load.spritesheet(\"bubble\",ee.a,{frameWidth:8,frameHeight:8}),this.load.spritesheet(\"whale\",oe.a,{frameWidth:64,frameHeight:33}),this.load.spritesheet(\"jelly\",ne.a,{frameWidth:28,frameHeight:25}),this.load.spritesheet(\"agrofish\",ce.a,{frameWidth:30,frameHeight:26}),this.load.spritesheet(\"seaHorse\",pe.a,{frameWidth:13,frameHeight:32}),this.load.spritesheet(\"lever\",L.a,{frameWidth:64,frameHeight:40}),this.cursors=this.input.keyboard.createCursorKeys(),this.keySpace=this.input.keyboard.addKey(Phaser.Input.Keyboard.KeyCodes.SPACE)}create(){super.create(),this.makeAlignGrid(11,11),this.blockGrid=new l({scene:this,rows:11,cols:120,width:8e3}),this.brickGroup=this.physics.add.group(),this.enWallGroup=this.physics.add.group();const e=10*this.sys.game.config.width,t=this.add.image(0,0,\"bkgr1\").setScrollFactor(0);t.displayHeight=this.sys.game.config.height,t.scaleX=t.scaleY,t.y=this.sys.game.config.height/2,t.x=this.sys.game.config.width/2,this.backGroundAlign(e,\"bkgr2\",\"bkgr2\",.25),this.backGroundAlign(e,\"bkgr3\",\"bkgr32\",.5),this.cameras.main.setBounds(0,0,10*this.sys.game.config.width,this.sys.game.config.height),this.makeFloor(357,359,\"ground2\");const s=this.physics.add.sprite(0,0,\"chest\");this.blockGrid.placeAtIndex(238,s),this.physics.add.collider(s,this.brickGroup),s.setGravityY(100),this.lever=this.physics.add.sprite(0,0,\"lever\"),this.blockGrid.placeAtIndex(1198,this.lever),i.scaleToGameW(this.lever,.075,this),this.lever.setImmovable(),this.lever2=this.physics.add.sprite(0,0,\"lever\"),this.blockGrid.placeAtIndex(1155,this.lever2),i.scaleToGameW(this.lever2,.075,this),this.lever2.setImmovable(),this.physics.world.setBounds(0,0,10*this.sys.game.config.width,this.sys.game.config.height),this.placeBlock(21,\"ground2\",.075),this.placeBlock(141,\"ground2\",.075),this.placeBlock(677,\"ground2\",.075),this.placeBlock(797,\"ground2\",.075),this.placeBlock(917,\"ground2\",.075),this.placeBlock(1037,\"ground2\",.075),this.placeBlock(1157,\"ground2\",.075),this.placedoorHalf(),this.placedoorEnd(),this.placeBlock(356,\"ground2\"),this.makeFloor(863,870,\"ground3\"),this.makeFloor(513,530,\"ground3\"),this.makeFloor(1020,1025,\"ground3\"),this.makeFloor(787,790,\"ground3\"),this.makeFloor(551,557,\"ground3\"),this.makeFloor(451,460,\"ground3\"),this.makeFloor(840,842,\"ground3\"),this.makeFloor(799,800,\"ground3\"),this.makeFloor(822,832,\"ground3\"),this.makeFloor(595,595,\"ground3\"),this.makeFloor(1200,1319,\"ground1\"),this.decorationGroup=this.physics.add.group(),this.createDecor(1086,\"coral1\",.05),this.createDecor(1097,\"coral2\",.055),this.createDecor(1127,\"coral2\",.055),this.createDecor(1141,\"coral1\",.055),this.createDecor(1144,\"coral1\",.055),this.createDecor(1142,\"coral2\",.055),this.createDecor(1156,\"coral1\",.055),this.createDecor(1165,\"coral1\",.055),this.createDecor(1171,\"coral2\",.055),this.createDecor(1191,\"coral1\",.055),this.createDecor(239,\"coral1\",.055),this.physics.add.collider(this.decorationGroup,this.brickGroup),this.dolphinsGroup=this.physics.add.group(),this.createDolphin(725),this.placeWall(723,\"enWall\"),this.placeWall(730,\"enWall\"),this.createDolphin(848),this.placeWall(845,\"enWall\"),this.placeWall(855,\"enWall\"),this.createDolphin(985),this.placeWall(983,\"enWall\"),this.placeWall(991,\"enWall\"),this.createDolphin(423),this.placeWall(420,\"enWall\"),this.placeWall(426,\"enWall\"),this.createDolphin(665),this.placeWall(663,\"enWall\"),this.placeWall(668,\"enWall\"),this.createDolphin(1061),this.placeWall(1058,\"enWall\"),this.placeWall(1063,\"enWall\"),this.createDolphin(836),this.placeWall(834,\"enWall\"),this.placeWall(839,\"enWall\"),this.createDolphin(1077),this.placeWall(1075,\"enWall\"),this.placeWall(1079,\"enWall\"),this.createDolphin(416),this.placeWall(414,\"enWall\"),this.placeWall(419,\"enWall\"),this.createDolphin(706),this.placeWall(701,\"enWall\"),this.placeWall(711,\"enWall\"),this.createDolphin(468),this.placeWall(465,\"enWall\"),this.placeWall(471,\"enWall\"),this.physics.add.collider(this.dolphinsGroup,this.enWallGroup),this.whalesGroup=this.physics.add.group(),this.createWhale(367),this.placeWall(364,\"enWall\"),this.placeWall(370,\"enWall\"),this.createWhale(266),this.placeWall(263,\"enWall\"),this.placeWall(270,\"enWall\"),this.createWhale(215),this.placeWall(210,\"enWall\"),this.placeWall(220,\"enWall\"),this.createWhale(890),this.placeWall(887,\"enWall\"),this.placeWall(898,\"enWall\"),this.physics.add.collider(this.whalesGroup,this.enWallGroup),this.jellysGroup=this.physics.add.group(),this.createJelly(620),this.placeWall(140,\"enWall\"),this.placeWall(1220,\"enWall\"),this.createJelly(879),this.placeWall(519,\"enWall\"),this.placeWall(1239,\"enWall\"),this.createJelly(439),this.placeWall(79,\"enWall\"),this.placeWall(799,\"enWall\"),this.createJelly(820),this.placeWall(460,\"enWall\"),this.placeWall(1180,\"enWall\"),this.createJelly(355),this.placeWall(115,\"enWall\"),this.placeWall(595,\"enWall\"),this.physics.add.collider(this.jellysGroup,this.enWallGroup),this.agroFishesGroup=this.physics.add.group(),this.createAgroFish(615),this.placeWall(612,\"enWall\"),this.placeWall(618,\"enWall\"),this.createAgroFish(400),this.placeWall(396,\"enWall\"),this.placeWall(410,\"enWall\"),this.createAgroFish(433),this.placeWall(430,\"enWall\"),this.placeWall(437,\"enWall\"),this.createAgroFish(808),this.placeWall(805,\"enWall\"),this.placeWall(812,\"enWall\"),this.createAgroFish(1166),this.placeWall(1161,\"enWall\"),this.placeWall(1170,\"enWall\"),this.createAgroFish(1194),this.placeWall(1190,\"enWall\"),this.placeWall(1198,\"enWall\"),this.physics.add.collider(this.agroFishesGroup,this.enWallGroup),this.seaHorsesGroup=this.physics.add.group(),this.createSeaHorse(482),this.placeWall(480,\"enWall\"),this.placeWall(484,\"enWall\"),this.createSeaHorse(1031),this.placeWall(1029,\"enWall\"),this.placeWall(1034,\"enWall\"),this.createSeaHorse(1004),this.placeWall(1001,\"enWall\"),this.placeWall(1007,\"enWall\"),this.physics.add.collider(this.seaHorsesGroup,this.enWallGroup),this.player=new fe(this,100,450,\"hero\"),this.blockGrid.placeAtIndex(720,this.player),this.player.setCollideWorldBounds(!0),this.physics.add.collider(this.player,this.brickGroup),this.physics.add.collider(this.player,this.dolphinsGroup,()=>{this.gameOver(!1)}),this.physics.add.collider(this.player,this.whalesGroup,()=>{this.gameOver(!1)}),this.physics.add.collider(this.player,this.jellysGroup,()=>{this.gameOver(!1)}),this.physics.add.collider(this.player,this.agroFishesGroup,()=>{this.gameOver(!1)}),this.physics.add.collider(this.player,this.seaHorsesGroup,()=>{this.gameOver(!1)}),this.physics.add.collider(this.player,s,()=>{this.gameOver(!0)}),this.physics.add.collider(this.player,this.lever,()=>{this.lever.anims.play(\"leverDown\"),this.doorEnd1.destroy(),this.doorEnd2.destroy()}),this.physics.add.collider(this.player,this.lever2,()=>{this.lever2.anims.play(\"leverDown\"),this.doorHalf1.destroy(),this.doorHalf2.destroy(),this.doorHalf3.destroy(),this.doorHalf4.destroy()}),this.player.animation(),this.anims.create({key:\"ink\",frames:this.anims.generateFrameNumbers(\"ink\",{start:0,end:2}),frameRate:10,repeat:-1}),this.anims.create({key:\"light\",frames:[{key:\"light\",frame:0}],frameRate:10,repeat:-1}),this.anims.create({key:\"bubble\",frames:[{key:\"bubble\",frame:0}],frameRate:10,repeat:-1}),this.anims.create({key:\"leverDown\",frames:[{key:\"lever\",frame:1}],frameRate:10,repeat:-1}),this.anims.create({key:\"bubbleMove\",frames:this.anims.generateFrameNumbers(\"bubbleMove\",{start:0,end:2}),frameRate:2,repeat:-1}),this.createBubbles(this.player),this.cameras.main.startFollow(this.player),this.makeUi(),this.scorePoints=0}createBubbles(e){this.time.addEvent({delay:5e3,callback:()=>{this.bubbleImg(e)},callbackScope:this,loop:!0})}bubbleImg(e){const t=this.physics.add.sprite(e.x,e.y,\"bubbleMove\");t.anims.play(\"bubbleMove\"),t.setGravityY(-100),this.physics.add.collider(t,this.brickGroup,()=>{t.destroy()}),this.time.addEvent({delay:5e3,callback:()=>{t.destroy()},callbackScope:this,loop:!1})}gameOver(e){if(this.mm.playSound(\"game_over\"),this.mm.background.stop(),e){this.emitter.emit(\"STOP_TIME\");const e=this.clock.getClockTime();this.scorePoints+=250,this.scorePoints+=5*e}else this.emitter.emit(\"STOP_TIME\");this.input.keyboard.removeCapture(Phaser.Input.Keyboard.KeyCodes.SPACE),this.input.keyboard.removeCapture(Phaser.Input.Keyboard.KeyCodes.RIGHT),this.input.keyboard.removeCapture(Phaser.Input.Keyboard.KeyCodes.LEFT),this.input.keyboard.removeCapture(Phaser.Input.Keyboard.KeyCodes.UP),this.input.keyboard.removeCapture(Phaser.Input.Keyboard.KeyCodes.DOWN),this.scene.start(\"SceneOver\",{score:this.scorePoints,win:e})}createDecor(e,t,s){const a=this.physics.add.sprite(0,0,t);this.decorationGroup.add(a),this.blockGrid.placeAtIndex(e,a),i.scaleToGameW(a,s,this),a.setImmovable(!0)}createDolphin(e){const t=new be(this,0,0,\"dolphin\");this.dolphinsGroup.add(t),t.animation(),t.moveRight(),this.blockGrid.placeAtIndex(e,t),i.scaleToGameW(t,.075,this)}createWhale(e){const t=new xe(this,0,0,\"whale\");this.whalesGroup.add(t),t.animation(),t.setImmovable(),t.moveRight(),this.blockGrid.placeAtIndex(e,t),i.scaleToGameW(t,.25,this),t.body.setSize(t.width,t.height/1.5,!1)}createJelly(e){const t=new ke(this,0,0,\"jelly\");this.jellysGroup.add(t),t.animation(),t.moveUp(),this.blockGrid.placeAtIndex(e,t),i.scaleToGameW(t,.05,this)}createAgroFish(e){const t=new ve(this,0,0,\"agroFish\");this.agroFishesGroup.add(t),t.animation(),t.setImmovable(),t.moveRight(),this.blockGrid.placeAtIndex(e,t),i.scaleToGameW(t,.075,this),t.body.setSize(t.width,t.height/1.35,!1)}createSeaHorse(e){const t=new Se(this,0,0,\"seaHorse\");this.seaHorsesGroup.add(t),t.animation(),t.setImmovable(),t.moveRight(),this.blockGrid.placeAtIndex(e,t),i.scaleToGameW(t,.025,this)}backGroundAlign(e,t,s,i){const a=this.textures.get(t).getSourceImage().width,h=Math.ceil(e/a)*i;let o=0,l=t;for(let e=0;e<h;e+=1){const a=this.add.image(o,0,l).setScrollFactor(i);a.displayHeight=this.sys.game.config.height,a.scaleX=a.scaleY,a.y=this.sys.game.config.height/2*.81,a.x=this.sys.game.config.width/2+o,o+=a.width*a.scaleY,l=e%4==0?s:t}}makeFloor(e,t,s){for(let i=e;i<t+1;i+=1)this.placeBlock(i,s)}placeWall(e,t){const s=this.physics.add.sprite(0,0,t);this.blockGrid.placeAtIndex(e,s),this.enWallGroup.add(s),s.setImmovable(),s.visible=!1,i.scaleToGameW(s,.025,this)}placeBlock(e,t,s=.1){const a=this.physics.add.sprite(0,0,t);this.blockGrid.placeAtIndex(e,a),this.brickGroup.add(a),a.setImmovable(),i.scaleToGameW(a,s,this)}placedoorHalf(){this.doorHalf1=this.physics.add.sprite(0,0,\"ground4\"),this.doorHalf2=this.physics.add.sprite(0,0,\"ground4\"),this.doorHalf3=this.physics.add.sprite(0,0,\"ground4\"),this.doorHalf4=this.physics.add.sprite(0,0,\"ground4\"),this.blockGrid.placeAtIndex(77,this.doorHalf1),this.brickGroup.add(this.doorHalf1),this.doorHalf1.setImmovable(),i.scaleToGameW(this.doorHalf1,.075,this),this.blockGrid.placeAtIndex(197,this.doorHalf2),this.brickGroup.add(this.doorHalf2),this.doorHalf2.setImmovable(),i.scaleToGameW(this.doorHalf2,.075,this),this.blockGrid.placeAtIndex(317,this.doorHalf3),this.brickGroup.add(this.doorHalf3),this.doorHalf3.setImmovable(),i.scaleToGameW(this.doorHalf3,.075,this),this.blockGrid.placeAtIndex(437,this.doorHalf4),this.brickGroup.add(this.doorHalf4),this.doorHalf4.setImmovable(),i.scaleToGameW(this.doorHalf4,.075,this)}placedoorEnd(){this.doorEnd1=this.physics.add.sprite(0,0,\"ground4\"),this.doorEnd2=this.physics.add.sprite(0,0,\"ground4\"),this.blockGrid.placeAtIndex(116,this.doorEnd1),this.brickGroup.add(this.doorEnd1),this.doorEnd1.setImmovable(),i.scaleToGameW(this.doorEnd1,.075,this),this.blockGrid.placeAtIndex(236,this.doorEnd2),this.brickGroup.add(this.doorEnd2),this.doorEnd2.setImmovable(),i.scaleToGameW(this.doorEnd2,.075,this)}makeUi(){super.makeSoundPanel(),super.makeGear(),this.scoreLabel=this.add.text(20,20,\"Score: 0\",{font:\"25px Arial\",fill:\"white\"}),this.placeAtIndex(0,this.scoreLabel),this.scoreLabel.setScrollFactor(0),this.clock=new Ie({scene:this,callback:this.timeUp.bind(this)}),this.placeAtIndex(10,this.clock),this.clock.setClock(260),this.clock.startClock(),this.clock.setScrollFactor(0)}timeUp(){this.gameOver(!1)}inkColliders(e){this.physics.add.collider(e,this.dolphinsGroup,(e,t)=>{e.destroy(),t.destroy(),this.mm.playSound(\"enemy_death\"),this.scorePoints+=10,this.scoreLabel.text=\"Score: \".concat(this.scorePoints)}),this.physics.add.collider(e,this.jellysGroup,(e,t)=>{e.destroy(),t.destroy(),this.mm.playSound(\"enemy_death\"),this.scorePoints+=15,this.scoreLabel.text=\"Score: \".concat(this.scorePoints)}),this.physics.add.collider(e,this.whalesGroup,(e,t)=>{e.destroy(),t.gotHit()?(t.destroy(),this.mm.playSound(\"enemy_death\"),this.scorePoints+=80,this.scoreLabel.text=\"Score: \".concat(this.scorePoints)):this.mm.playSound(\"enemy_hit\")}),this.physics.add.collider(e,this.agroFishesGroup,(e,t)=>{e.destroy(),t.gotHit()?(t.destroy(),this.mm.playSound(\"enemy_death\"),this.scorePoints+=45,this.scoreLabel.text=\"Score: \".concat(this.scorePoints)):this.mm.playSound(\"enemy_hit\")}),this.physics.add.collider(e,this.seaHorsesGroup,(e,t)=>{e.destroy(),t.destroy(),this.mm.playSound(\"enemy_death\"),this.scorePoints+=15,this.scoreLabel.text=\"Score: \".concat(this.scorePoints)}),this.physics.add.collider(e,this.lever,()=>{this.lever.anims.play(\"leverDown\"),this.doorEnd1.destroy(),this.doorEnd2.destroy(),e.destroy()}),this.physics.add.collider(e,this.lever2,()=>{this.lever2.anims.play(\"leverDown\"),this.doorHalf1.destroy(),this.doorHalf2.destroy(),this.doorHalf3.destroy(),this.doorHalf4.destroy(),e.destroy()}),this.physics.add.collider(e,this.brickGroup,e=>{e.destroy()})}lightColliders(e,t){this.mm.playSound(\"enemy_shoot\"),this.physics.add.collider(t,this.player,()=>{this.gameOver(!1)}),this.time.addEvent({delay:1e3,callback:()=>{e.body&&(e.body.velocity.x>0?e.anims.play(\"agroright\",!0):e.anims.play(\"agroleft\",!0))},callbackScope:this,loop:!1}),this.time.addEvent({delay:3e3,callback:()=>{e.shootAgain(),t.destroy()},callbackScope:this,loop:!1})}bubbleColliders(e,t){this.mm.playSound(\"enemy_shoot\"),this.physics.add.collider(t,this.player,()=>{this.gameOver(!1)}),this.time.addEvent({delay:3e3,callback:()=>{e.shootAgain(),t.destroy()},callbackScope:this,loop:!1})}update(){if(this.cursors.left.isDown?this.player.moveLeft():this.cursors.right.isDown?this.player.moveRight():(this.player.setVelocityX(0),this.player.anims.play(\"turn\"),this.cursors.up.getDuration()),this.player.body.touching.down&&this.player.setData(\"dbJump\",!0),this.cursors.up.isDown&&this.player.getData(\"dbJump\")&&this.player.jump(this.cursors.up,this),this.keySpace.isDown)if(this.cursors.left.timeDown>this.cursors.right.timeDown){if(this.player.getData(\"inkTime\")+300<this.keySpace.timeDown){const e=new ge(this,this.player.x,this.player.y,\"ink\");e.inkLeft(),this.inkColliders(e),e.inkAnimation(),this.player.setData(\"inkTime\",this.keySpace.timeDown)}}else if(this.player.getData(\"inkTime\")+300<this.keySpace.timeDown){const e=new ge(this,this.player.x,this.player.y,\"ink\");e.inkRight(),this.inkColliders(e),e.inkAnimation(),this.player.setData(\"inkTime\",this.keySpace.timeDown)}this.dolphinsGroup.getChildren().forEach(e=>{e.body.touching.right||e.body.blocked.right?e.moveLeft():(e.body.touching.left||e.body.blocked.left)&&e.moveRight()},this),this.whalesGroup.getChildren().forEach(e=>{e.body.touching.right||e.body.blocked.right?e.moveLeft():(e.body.touching.left||e.body.blocked.left)&&e.moveRight()},this),this.jellysGroup.getChildren().forEach(e=>{e.body.touching.up||e.body.blocked.up?e.moveDown():(e.body.touching.down||e.body.blocked.down)&&e.moveUp()},this),this.agroFishesGroup.getChildren().forEach(e=>{if(e.body.touching.right||e.body.blocked.right?e.moveLeft():(e.body.touching.left||e.body.blocked.left)&&e.moveRight(),e.x-this.player.x>-500&&e.x-this.player.x<500&&e.getData(\"shoot\")){e.shootDone();const t=new ue(this,e.x,e.y,\"light\");e.x-this.player.x<0?(e.anims.play(\"shootright\",!0),t.boltRight()):(e.anims.play(\"shootleft\",!0),t.boltLeft()),this.lightColliders(e,t)}},this),this.seaHorsesGroup.getChildren().forEach(e=>{if(e.body.touching.right||e.body.blocked.right?e.moveLeft():(e.body.touching.left||e.body.blocked.left)&&e.moveRight(),e.x-this.player.x>-500&&e.x-this.player.x<500&&e.getData(\"shoot\")){e.shootDone();const t=new ye(this,e.x,e.y,\"bubble\");i.scaleToGameW(t,.015,this),e.x-this.player.x<0?t.bubbleRight():t.bubbleLeft(),this.bubbleColliders(e,t)}},this)}},class extends k{constructor(){super(\"SceneOver\")}preload(){this.load.image(\"chest\",M.a),this.load.spritesheet(\"agrofish\",ce.a,{frameWidth:30,frameHeight:26})}create(e){super.create(),this.setBackground(\"seaBg\"),this.makeAlignGrid(11,11);const t=_e.createElements();this.add.dom(0,0,t);const s=this.add.image(0,0,\"panelBack\");if(i.scaleToGameW(s,.9,this),this.aGrid.placeAtIndex(60,s),this.formUtil=new De({scene:this,rows:11,cols:11}),this.formUtil.showElement(\"enterName\"),this.formUtil.hideElement(\"enterName\"),this.formUtil.scaleToGameW(\"enterName\",.4),this.placeText(\"\\n\\n Enter Your name:\",49,\"BLACK\"),this.formUtil.placeElementAt(61,\"enterName\",!0),this.sendScore=new Pe(this,\"btn1\",\"btnH1\",e.score),this.aGrid.placeAtIndex(71,this.sendScore),e.win){this.placeText(\"You Won\",16,\"TITLE_TEXT\");const e=this.physics.add.sprite(0,0,\"chest\");this.aGrid.placeAtIndex(38,e),i.scaleToGameW(e,.3,this)}else{this.placeText(\"You Lose\",16,\"TITLE_TEXT\"),this.anims.create({key:\"agrofish\",frames:this.anims.generateFrameNumbers(\"agrofish\",{start:8,end:9}),frameRate:1,repeat:-1});const e=this.physics.add.sprite(0,0,\"agrofish\");this.aGrid.placeAtIndex(38,e),e.anims.play(\"agrofish\",!0),i.scaleToGameW(e,.18,this)}this.placeText(\"SCORE\",82,\"BLACK2\"),this.placeText(\"\".concat(e.score,\" Points\"),93,\"BLACK\"),this.returnBtn=new Ee(this,\"btn1\",\"btnH1\",\"Back to Menu\",\"SceneTitle\"),this.aGrid.placeAtIndex(104,this.returnBtn),this.makeUi()}makeUi(){super.makeSoundPanel(),super.makeGear()}playAgain(){this.scene.start(\"SceneMain\")}update(){}},class extends k{constructor(){super(\"SceneLeaderboard\")}preload(){this.load.spritesheet(\"loading\",Oe.a,{frameWidth:60,frameHeight:53})}create(){super.create(),this.setBackground(\"seaBg\"),this.makeAlignGrid(11,11);const e=this.add.image(0,0,\"panelBack\");i.scaleToGameW(e,.9,this),this.aGrid.placeAtIndex(60,e),this.placeText(\"LEADERBOARD\",16,\"TITLE_TEXT\");const t=this.physics.add.sprite(0,0,\"loading\");this.anims.create({key:\"loading\",frames:this.anims.generateFrameNumbers(\"loading\",{start:0,end:3}),frameRate:10,repeat:-1}),this.aGrid.placeAtIndex(60,t),t.anims.play(\"loading\",!0),i.scaleToGameW(t,.25,this),Ce.getScores().then(e=>{const s=e.sort((e,t)=>t.score-e.score);let i=\"\",a=\"\";for(let e=0;e<10&&(e<5?i+=\"\".concat(e+1,\" - \").concat(s[e].user,\": \").concat(s[e].score,\"\\n\\n\"):a+=\"\".concat(e+1,\" - \").concat(s[e].user,\": \").concat(s[e].score,\"\\n\\n\"),e!==s.length-1);e+=1);t.destroy(),\"\"!==a?(this.placeText(i,58,\"BLACK2\"),this.placeText(a,62,\"BLACK2\")):this.placeText(i,60,\"BLACK2\")}).catch(()=>{t.destroy(),this.placeText(\"Problem to connect with API\\n          Try again later\",60,\"RED\")}),this.returnBtn=new Ee(this,\"btn1\",\"btnH1\",\"Back to Menu\",\"SceneTitle\",!0),this.aGrid.placeAtIndex(93,this.returnBtn),this.makeUi()}makeUi(){super.makeSoundPanel(),super.makeGear()}update(){}},class extends k{constructor(){super(\"SceneInstructions\")}preload(){this.load.spritesheet(\"hero\",z.a,{frameWidth:43,frameHeight:48}),this.load.spritesheet(\"ink\",Q.a,{frameWidth:17,frameHeight:15}),this.load.spritesheet(\"light\",ae.a,{frameWidth:15,frameHeight:15}),this.load.spritesheet(\"bubble\",ee.a,{frameWidth:8,frameHeight:8}),this.load.spritesheet(\"agrofish\",ce.a,{frameWidth:30,frameHeight:26}),this.load.spritesheet(\"lever\",L.a,{frameWidth:64,frameHeight:40}),this.load.spritesheet(\"seaHorse\",pe.a,{frameWidth:13,frameHeight:32}),this.load.image(\"chest\",M.a)}create(){super.create(),this.setBackground(\"seaBg\"),this.anims.create({key:\"hero\",frames:this.anims.generateFrameNumbers(\"hero\",{start:0,end:4}),frameRate:4,repeat:-1}),this.anims.create({key:\"ink\",frames:this.anims.generateFrameNumbers(\"ink\",{start:0,end:2}),frameRate:10,repeat:-1}),this.anims.create({key:\"lever\",frames:this.anims.generateFrameNumbers(\"lever\",{start:0,end:1}),frameRate:1,repeat:-1}),this.anims.create({key:\"agrofish\",frames:this.anims.generateFrameNumbers(\"agrofish\",{start:0,end:7}),frameRate:5,repeat:-1}),this.anims.create({key:\"seaHorse\",frames:this.anims.generateFrameNumbers(\"seaHorse\",{start:0,end:3}),frameRate:3,repeat:-1}),this.makeAlignGrid(11,11);const e=this.add.image(0,0,\"panelBack\");i.scaleToGameW(e,.9,this),this.aGrid.placeAtIndex(60,e);const t=this.physics.add.sprite(0,0,\"hero\");this.aGrid.placeAtIndex(34,t),t.anims.play(\"hero\",!0),this.placeText(\"INSTRUCTIONS\",16,\"TITLE_TEXT\"),this.placeText(\"CONTROLS\",27,\"BLACK2\"),this.placeText(\"Arrows left and right to move, arrow up to jump\",38,\"BLACK\");const s=this.physics.add.sprite(0,0,\"ink\");this.aGrid.placeAtIndex(45,s),s.anims.play(\"ink\",!0),this.placeText(\"Press space to shoot, killing enemies get you points\",49,\"BLACK\"),this.placeText(\"OBJECTIVES\",60,\"BLACK2\");const a=this.physics.add.sprite(0,0,\"light\"),h=this.physics.add.sprite(0,0,\"bubble\"),o=this.physics.add.sprite(0,0,\"chest\"),l=this.physics.add.sprite(0,0,\"lever\"),n=this.physics.add.sprite(0,0,\"seaHorse\"),r=this.physics.add.sprite(0,0,\"agrofish\");this.aGrid.placeAtIndex(57,o),this.placeText(\"Our objective is to reach the chest.\",69,\"BLACK\"),this.aGrid.placeAtIndex(63,l),l.anims.play(\"lever\",!0),this.placeText(\"Use levers to open path\",74,\"BLACK\"),this.placeText(\"Some enemies have more than 1 life, but they run if you hit\",82,\"BLACK\"),this.placeText(\"Reach the chest faster to get more points\",93,\"BLACK\"),this.aGrid.placeAtIndex(97,n),n.anims.play(\"seaHorse\",!0),i.scaleToGameW(n,.035,this),this.aGrid.placeAtIndex(89,r),r.anims.play(\"agrofish\",!0),i.scaleToGameW(r,.09,this),this.aGrid.placeAtIndex(90,a),this.aGrid.placeAtIndex(96,h),this.returnBtn=new Ee(this,\"btn1\",\"btnH1\",\"Back to Menu\",\"SceneTitle\",!0),this.aGrid.placeAtIndex(104,this.returnBtn),this.makeUi()}makeUi(){super.makeSoundPanel(),super.makeGear()}update(){}}],physics:{default:\"arcade\",arcade:{debug:!1}},dom:{createContainer:!0}};new Phaser.Game(Ne)}]);","extractedComments":[]}